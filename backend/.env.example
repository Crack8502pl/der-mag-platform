# ==========================================
# Der-Mag Platform - Environment Variables
# ==========================================
#
# üîí ENCRYPTED SECRETS MANAGEMENT
# This project uses dotenv-vault for encrypted secrets management.
#
# Quick Start:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your local values in .env
# 3. Initialize vault: npm run env:init (first time only)
# 4. Push to vault: npm run env:push
# 5. Build encrypted file: npm run env:build
#
# üìñ For detailed instructions, see: docs/ENCRYPTED_ENV_SETUP.md
# üîê For security best practices, see: docs/SECURITY_SECRETS_GUIDE.md
#
# ==========================================

NODE_ENV=development
PORT=3000

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=dermag_platform
DB_USER=dermag_user
DB_PASSWORD=change-me-in-production

# JWT - Token Rotation Configuration
# IMPORTANT: Generate strong random secrets for production
# Example command: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_ACCESS_SECRET=[GENERATE-STRONG-SECRET-HERE]
JWT_REFRESH_SECRET=[GENERATE-DIFFERENT-STRONG-SECRET-HERE]
ACCESS_EXPIRES=15m
REFRESH_EXPIRES=7d
JWT_ISSUER=der-mag-platform
JWT_AUDIENCE=der-mag-api

# Optional: Enable paranoid mode to check refresh token existence in DB on every request
PARANOID_MODE=false

# Upload
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# CORS - Frontend URLs (comma-separated)
# Add local network IPs for LAN access, e.g., http://192.168.1.100:3000
CORS_ORIGIN=http://localhost:5173,http://localhost:3001,http://localhost:3000

# Security - Disable strict CSP in development
# Set to 'true' to allow inline scripts and styles (needed for Vite HMR and local network)
DISABLE_CSP=true

# Default Admin (used only for initial seeding)
ADMIN_EMAIL=r.krakowski@der-mag.pl

# AD/LDAP (disabled for testing)
# LDAP_SERVER=ldap://your-ad-server
# LDAP_BIND_DN=CN=Service,DC=company,DC=com
# LDAP_BIND_PASSWORD=password

# Email Configuration (nazwa.pl SMTP)
SMTP_HOST=smtp.nazwa.pl
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@your-domain.pl
SMTP_PASSWORD=your-password

EMAIL_FROM_NAME=Der-Mag Platform
EMAIL_FROM_ADDRESS=noreply@your-domain.pl

# Redis for email queue
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=

# Frontend URL (for links in emails)
FRONTEND_URL=http://localhost:3001

# Encryption key for sensitive data (SMTP password, etc.)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=[GENERATE-64-CHAR-HEX-STRING-HERE]

# API Tester (dostƒôpny na /test/api-tester.html)
# W development w≈ÇƒÖczony domy≈õlnie, w production wymaga explicit true
ENABLE_API_TESTER=true

# ==========================================
# DEPLOYMENT CONFIGURATION
# ==========================================

# Frontend jest serwowany z tego samego portu co backend
# Po zbudowaniu frontendu (npm run build), pliki z frontend/dist/
# sƒÖ automatycznie serwowane przez backend na porcie PORT

# Dla produkcji zaleca siƒô u≈ºycie Nginx/Apache jako reverse proxy
# Przyk≈Çadowa konfiguracja Nginx w: docs/NGINX_SETUP.md

